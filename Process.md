# Process of Appletv-mserver

# Introduction #

Using http status 302 to redirect the access.

# Details #

1 Http request to **.mkv**

2 redirect to mplay.cgi?name.mkv

3 start transcoding. redirect to http://ip/path/pl/{length}.m3u8

4 internal rewrite length.m3u8 with m3u8.cgi?{length}

5 generate m3u8 with http://ip/path/pl/segment_{seq}.ts

6 internal rewrite segment_{seq}.ts with ts.cgi?seq_

7 ts.cgi check whether the segment is ready, control the transcoding to seek or not. After the segment is ready, redirect to http://ip/path/segment_{seq}.ts

8 http://ip/path/segment_{seq}.ts is real file generated by transcoding